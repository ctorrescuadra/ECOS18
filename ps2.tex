\documentclass[a4paper,10pt]{article}
\usepackage{txfonts}
\usepackage[T1]{fontenc}
\usepackage{tikz}
\usepackage[graphics,tightpage,active]{preview}
\usetikzlibrary{shapes.geometric}
\PreviewEnvironment{tikzpicture}
\tikzstyle{arrow}=[->,>=stealth,thin,font=\small,text=black]
\tikzstyle{process}=[fill=black!10]
\tikzstyle{stream}=[diamond, fill=black!20,font=\sffamily\bfseries\small,inner sep=2pt]
\tikzstyle{empty}=[circle, fill=white, inner sep=0pt]
\tikzstyle{hdist}=[node distance=1.5cm]
\tikzstyle{vdist}=[node distance=1cm]
\begin{document}
	\pagestyle{empty}
	
\begin{tikzpicture}
 \draw[draw=none] (-0.1,-2.5) rectangle (7.1,2.5);
 %\draw[step=0.5,black!10,very thin] (-0.1,-2.6) grid (7.1,2.6);
 \node[empty,at={(0,1)}] (E1) {};
 \node[empty,at={(0,-1)}] (E2) {};
 \node[empty,at={(2.5,1)}] (V1) {};
 \node[empty,at={(2.5,-1)}] (V2) {};
 \node[stream] (F1) [right of=E1,hdist]  {$F_1$};
 \node[stream] (F2) [right of=E2,hdist]  {$F_2$};
 \node[empty] (E3) [below of=F2,hdist] {};
 \node[empty,at={(4.5,1)}] (V3) {};
 \node[empty,at={(4.5,-1)}] (V4) {};
 \node[stream] (P1) [right of=V3,vdist]  {$P_1$};
 \node[stream] (P2) [right of=V4,vdist]  {$P_2$};
 \node[empty] (E5) [right of=P1,hdist] {};
 \node[empty] (E6) [right of=P2,hdist] {};
 \node[empty] (E4) [above of=P1,hdist] {};
 \draw[arrow] (E1) --  node[above]{$E_1$} (F1);
 \draw[arrow] (F1) -- (V1);
 \draw[arrow] (E2) -- node[above]{$E_2$}(F2);
 \draw[arrow] (F2) -- (V2);
 \draw[arrow] (F2) -- node[left]{$E_3$}(E3);
 \draw[arrow] (V3) -- (P1);
 \draw[arrow] (V4) -- (P2);
 \draw[arrow] (P1) -- node[above]{$E_5$}(E5);
 \draw[arrow] (P2) -- node[above]{$E_6$}(E6);
 \draw[arrow] (E4) -- node[left]{$E_4$}(P1);
 \draw[process] (2.5,-2.2) rectangle (4.5,2.0); 
\end{tikzpicture}
\end{document}